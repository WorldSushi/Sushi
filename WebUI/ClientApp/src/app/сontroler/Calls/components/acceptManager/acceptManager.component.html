<mat-card class="mat-elevation-z1">
  <mat-card-header>
    <mat-card-title class="card-title">–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–≤–æ–Ω–∫–æ–≤</mat-card-title>
    <div id="fountainG" [hidden]="hiddenloader">
      <div id="fountainG_1" class="fountainG"></div>
      <div id="fountainG_2" class="fountainG"></div>
      <div id="fountainG_3" class="fountainG"></div>
      <div id="fountainG_4" class="fountainG"></div>
      <div id="fountainG_5" class="fountainG"></div>
      <div id="fountainG_6" class="fountainG"></div>
      <div id="fountainG_7" class="fountainG"></div>
      <div id="fountainG_8" class="fountainG"></div>
    </div>  
  </mat-card-header>
  <div class="filter clearfix">
    <input (keyup)="applyFilterNumberOrname($event.target.value)" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω –∏–ª–∏ –ù–∞–∑–≤–∞–Ω–∏–µ">
    <input (keyup)="applyFilterDuration($event.target.value)" placeholder="–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å">
    <select [(ngModel)]="direction" (ngModelChange)="changeDirection()">
      <option [ngValue]=0>–í—Å–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è</option>
      <option [ngValue]=1>–ò—Å—Ö–æ–¥—è—â–∏–µ</option>
      <option [ngValue]=2>–í—Ö–æ–¥—è—â–∏–µ</option>
    </select>
    <select [(ngModel)]="selectedManager" (ngModelChange)="changeManager()">
      <option selected [ngValue]=0>–í—Å–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞</option>
      <option *ngFor="let elm of managers" [ngValue]=elm.id>{{elm.login}}</option>
    </select>
    <button (click)="hiddenCalendar()">{{btnDate}}</button>
    <div [hidden]="calendarHidden" class="blockCalendar">
      <div class="calendar">
        <igx-calendar (onSelection)="verifyRange($event)" selection="range"></igx-calendar>
      </div>
      <div class="sortbloc">
        <button (click)="sortDateCall(1)" class="btnSort">–ó–∞ –≤—Å—ë –≤—Ä–µ–º—è</button><br />
        <button (click)="sortDateCall(2)" class="btnSort">–ó–∞ –°–µ–≥–æ–¥–Ω—è</button><br />
        <button (click)="sortDateCall(3)" class="btnSort">–ó–∞ –í—á–µ—Ä–∞</button><br />
        <button (click)="sortDateCall(4)" class="btnSort">–ó–∞ –ü–æ—Å–ª–µ–¥–Ω–∏–µ 7 –î–Ω–µ–π</button><br />
        <button (click)="sortDateCall(5)" class="btnSort">3–∞ –ü–æ—Å–ª–µ–¥–Ω–∏–µ 30 –î–Ω–µ–π</button><br />
        <button (click)="sortDateCall(6)" class="btnSort">–ó–∞ –¢–µ–∫—É—â—é—é –Ω–µ–¥–µ–ª—é</button><br />
        <button (click)="sortDateCall(7)" class="btnSort">–ó–∞ –¢–µ–∫—É—â–∏–π –ú–µ—Å—è—Ü</button><br />
        <button (click)="sortDateCall(8)" class="btnSort">–ó–∞ –¢–µ–∫—É—â–∏–π –≥–æ–¥</button><br />
      </div>
    </div>
  </div>
  <div class="bodyAll">


    <mat-paginator [pageSizeOptions]="[10, 20, 30, 40, 50, 60, 70, 80, 90, 100]" showFirstLastButtons></mat-paginator>
    <table mat-table [dataSource]="dataSource" matSort>

      <ng-container matColumnDef="status">
        <th colspan="1" mat-header-cell *matHeaderCellDef></th>
        <td colspan="1" mat-cell *matCellDef="let element" [style.background]="setBagroundStatus(element)"></td>
      </ng-container>

      <ng-container matColumnDef="statusCall">
        <th colspan="4" mat-header-cell *matHeaderCellDef>–°—Ç–∞—Ç—É—Å</th>
        <td colspan="4" mat-cell *matCellDef="let element"><span *ngIf="element.contactType != 50"> {{element.contactType == 40 ? "‚úì" : "üóô"}}</span></td>
      </ng-container>

      <ng-container matColumnDef="direction">
        <th colspan="4" mat-header-cell *matHeaderCellDef>–°—Ç–∞—Ç—É—Å –∑–≤–æ–Ω–∫–∞</th>
        <td colspan="4" mat-cell *matCellDef="let element">{{element.direction == "–í—Ö–æ–¥—è—â–∏–π" ? "üì±‚Üê" : element.direction == "–ò—Å—Ö–æ–¥—è—â–∏–π" ? "üì±‚Üí" : element.direction}} </td>
      </ng-container>

      <ng-container matColumnDef="answer">
        <th colspan="4" mat-header-cell *matHeaderCellDef>–û—Ç–≤–µ—á–µ–Ω</th>
        <td colspan="4" mat-cell *matCellDef="let element">{{element.durations == 0 ? "üóô" : "‚úì"}} </td>
      </ng-container>

      <ng-container matColumnDef="title">
        <th colspan="4" mat-header-cell *matHeaderCellDef>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
        <td colspan="4" mat-cell *matCellDef="let element">{{element.titleClient}} </td>
      </ng-container>

      <ng-container matColumnDef="phone">
        <th colspan="4" mat-header-cell *matHeaderCellDef>–ù–æ–º–µ—Ä —Ç–µ–ª</th>
        <td colspan="4" mat-cell *matCellDef="let element">{{element.phone}}</td>
      </ng-container>

      <ng-container matColumnDef="duration">
        <th colspan="4" mat-header-cell *matHeaderCellDef>–ü—Ä–æ–¥–æ–ª–∂–∏..</th>
        <td colspan="4" mat-cell *matCellDef="let element" style="max-width: 300px">{{element.durations}} –°–µ–∫</td>
      </ng-container>

      <ng-container matColumnDef="date">
        <th colspan="4" mat-header-cell *matHeaderCellDef>–î–∞—Ç–∞</th>
        <td colspan="4" mat-cell *matCellDef="let element">{{element.date}}</td>
      </ng-container>

      <ng-container matColumnDef="comentCon">
        <th colspan="14" mat-header-cell *matHeaderCellDef>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∞</th>
        <td colspan="14" mat-cell *matCellDef="let element">
          <textarea *ngIf="element.contactType != 50" style="max-width:300px;height:60px;margin:0px;width:200px;">{{element.callsComments?.comment}}</textarea><br />
          <button *ngIf="element.contactType != 50" (click)="setNoAccept($event, element.id, element.clientId)" class="btnAccept">–û—Ç–∫–ª–æ–Ω–∏—Ç—å</button>
          <button  *ngIf="element.contactType != 50" (click)="setAccept($event, element.id, element.clientId)" class="btnAccept">–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ</button>
        </td>
      </ng-container>

      <ng-container matColumnDef="comentCli">
        <th colspan="7" mat-header-cell *matHeaderCellDef>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä–∞</th>
        <td colspan="7" mat-cell *matCellDef="let element">{{element.callsComments?.managerComment}}</td>
      </ng-container>

      <ng-container matColumnDef="refAudio">
        <th colspan="14" mat-header-cell *matHeaderCellDef>–ê—É–¥–∏–æ –∑–∞–ø–∏—Å—å</th>
        <td colspan="14" mat-cell *matCellDef="let element"><audio style="height:20px" controls preload="none" src="{{element.referenceAudioVoice}}"></audio></td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;" (dblclick)="openEditClientForm(row)"></tr>
    </table>
  </div>
</mat-card>
